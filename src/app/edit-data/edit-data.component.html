<h1>Edycja danych</h1>
<div class="col-md-8 col-md-offset-2">
  <div *ngIf="errorFlag" id="error" class="alert alert-warning">
    <a (click)="hideErrorr()" href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    {{errorMessage}}
  </div>

  <div *ngIf="successFlag"  class="alert alert-success alert-dismissable">
    <a (click)="hideSuccess()" href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    {{successMessage}}
  </div>
  <form #editForm="ngForm" (ngSubmit)="onSubmit(editForm.value)">

    <div class="form-group">
      <label for="firstName">{{'Imie'|translate}}</label>
      <input maxlength="100"  pattern="/^([a-z]{2,3} [A-ZŁŻ][a-ząęóżźćńłś]{2,})|([A-ZŁŻ][a-ząęóżźćńłś]{2,})(\-[A-ZŁŻ][a-ząęóżźćńłś]{2,})?$" type="text" #firstNameRef="ngModel" maxlength="100" required class="form-control" id="firstName" name="firstName" [ngModel]="firstName"/>
      <div *ngIf="firstNameRef.errors && (firstNameRef.dirty || firstNameRef.touched)" class="alert-warning">
        <div [hidden] = "!firstNameRef.errors.required">
          {{'Podaj imie!'|translate}}
        </div>
        <div [hidden] = "!firstNameRef.errors.pattern">
          {{'Podaj poprawne imie!'|translate}}
        </div>
        <div [hidden]="!firstNameRef.errors.maxlength">
          {{'Imie moze zawierac maksymalnie 100 znakow!'|translate}}
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="lastName">{{'Nazwisko'|translate}}</label>
      <input maxlength="100"  pattern="/^([a-z]{2,3} [A-ZŁŻ][a-ząęóżźćńłś]{2,})|([A-ZŁŻ][a-ząęóżźćńłś]{2,})(\-[A-ZŁŻ][a-ząęóżźćńłś]{2,})?$" type="text" #lastNameRef="ngModel" maxlength="100" required class="form-control" id="lastName" name="lastName" [ngModel]="lastName"/>
      <div *ngIf="lastNameRef.errors && (lastNameRef.dirty || lastNameRef.touched)" class="alert-warning">
        <div [hidden] = "!lastNameRef.errors.required">
          {{'Podaj nazwisko!'|translate}}
        </div>
        <div [hidden] = "!lastNameRef.errors.pattern">
          {{'Podaj poprawne nazwisko!'|translate}}
        </div>
        <div [hidden]="!lastNameRef.errors.maxlength">
          {{'Nazwisko moze zawierac maksymalnie 100 znakow!'|translate}}
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="country">{{'Obywatelstwo'|translate}}</label>
      <select #countryRef="ngModel" required class="form-control" id="country" name="country" [ngModel]="country"><option>{{'Austria'|translate}}</option><option>{{'Belgia'|translate}}</option><option>{{'Bulgaria'|translate}}</option><option>{{'Chorwacja'|translate}}</option><option>{{'Cypr'|translate}}</option><option>{{'Czechy'|translate}}</option><option>{{'Dania'|translate}}</option><option>{{'Estonia'|translate}}</option><option>{{'Finlandia'|translate}}</option><option>{{'Francja'|translate}}</option><option>{{'Grecja'|translate}}</option><option>{{'Hiszpania'|translate}}</option><option>{{'Holandia'|translate}}</option><option>{{'Irlandia'|translate}}</option><option>{{'Litwa'|translate}}</option><option>{{'Luksemburg'|translate}}</option><option>{{'lotwa'|translate}}</option><option>{{'Malta'|translate}}</option><option>{{'Niemcy'|translate}}</option><option>{{'Polska'|translate}}</option><option>{{'Portugalia'|translate}}</option><option>{{'Rumunia'|translate}}</option><option>{{'Slowacja'|translate}}</option><option>{{'Slowenia'|translate}}</option><option>{{'Szwecja'|translate}}</option><option>{{'Wegry'|translate}}</option><option>{{'Wielka Brytania'|translate}}</option><option>{{'Wlochy'|translate}}</option></select>
      <div *ngIf="countryRef.errors && (countryRef.dirty || countryRef.touched)" class="alert-warning">
        <div [hidden] = "!countryRef.errors.required">
          {{'Podaj swoje obywatelstwo!'|translate}}
        </div>
      </div>
    </div>

    <button [disabled]=" loading ||!editForm.form.valid" type="submit" class="btn btn-primary">{{'Edytuj dane'| translate}}</button>
    <button [disabled]=" loading " type="button" (click)="wyloguj()" class="btn btn-danger">{{'Wyloguj'|translate}}</button>
  </form>
</div>
